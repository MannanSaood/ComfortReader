<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>ComfortRead</title>
    <link rel="stylesheet" href="viewer.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    </head>
<body>

  <div id="top-bar">
    <div class="top-bar-section left">
        <button id="sidebar-toggle" class="toolbar-btn" title="Toggle Sidebar">
            <i class="fas fa-bars"></i>
        </button>
        <button id="doc-properties-btn" class="toolbar-btn" title="Document Properties">
            <i class="fas fa-info-circle"></i>
        </button>
    </div>
    <div class="top-bar-section center">
        <div class="control-group page-controls">
            <button id="first-page-btn" class="toolbar-btn" title="First Page">
                <i class="fas fa-step-backward"></i>
            </button>
            <button id="prev-page" class="toolbar-btn" title="Previous Page">
                <i class="fas fa-arrow-left"></i>
            </button>
            <input type="number" id="page-number" value="1" min="1">
    <span id="page-count">/ 1</span>
            <button id="next-page" class="toolbar-btn" title="Next Page">
                <i class="fas fa-arrow-right"></i>
            </button>
            <button id="last-page-btn" class="toolbar-btn" title="Last Page">
                <i class="fas fa-step-forward"></i>
            </button>
        </div>
        <div class="control-group zoom-controls">
            <button id="zoom-out-btn" class="toolbar-btn" title="Zoom Out">
                <i class="fas fa-search-minus"></i>
            </button>
            <div class="zoom-input-container">
                <input type="text" id="zoom-level-input" class="toolbar-input" title="Set custom zoom level (e.g., 85%)">
                <div class="dropdown-container">
                    <button id="zoom-dropdown-toggle" class="toolbar-btn" title="Zoom Options"><i class="fas fa-caret-down"></i></button>
                    <div id="zoom-dropdown" class="dropdown-content">
                        <button id="zoom-auto-btn" class="toolbar-btn-dropdown">Automatic Zoom</button>
                        <button id="zoom-actual-btn" class="toolbar-btn-dropdown">Actual Size</button>
                        <button id="zoom-fit-btn" class="toolbar-btn-dropdown">Page Fit</button>
                        <button id="zoom-width-btn" class="toolbar-btn-dropdown">Page Width</button>
                        <div class="dropdown-separator"></div>
                        <button class="zoom-preset-btn toolbar-btn-dropdown" data-zoom="0.5">50%</button>
                        <button class="zoom-preset-btn toolbar-btn-dropdown" data-zoom="0.75">75%</button>
                        <button class="zoom-preset-btn toolbar-btn-dropdown" data-zoom="1">100%</button>
                        <button class="zoom-preset-btn toolbar-btn-dropdown" data-zoom="1.25">125%</button>
                        <button class="zoom-preset-btn toolbar-btn-dropdown" data-zoom="1.5">150%</button>
                        <button class="zoom-preset-btn toolbar-btn-dropdown" data-zoom="2">200%</button>
                        <button class="zoom-preset-btn toolbar-btn-dropdown" data-zoom="3">300%</button>
                    </div>
                </div>
            </div>
            <button id="zoom-in-btn" class="toolbar-btn" title="Zoom In">
                <i class="fas fa-search-plus"></i>
            </button>
        </div>
    </div>
    <div class="top-bar-section right">
        <div class="control-group view-controls">
            <label class="toggle-control" title="Invert Colors">
                <input type="checkbox" id="invert-toggle">
                <span class="label-text">Invert</span>
            </label>
            <label class="toggle-control" title="Grayscale">
                <input type="checkbox" id="grayscale-toggle">
                <span class="label-text">Grayscale</span>
            </label>
            <label class="toggle-control" title="Toggle Continuous View">
                <input type="checkbox" id="view-mode-toggle">
                <span class="label-text">Continuous</span>
            </label>
            <label class="toggle-control" title="Toggle Horizontal Reading">
                <input type="checkbox" id="horizontal-view-toggle">
                <span class="label-text">Horizontal</span>
            </label>
            <label class="toggle-control" title="Invert Horizontal Scroll (for Manga)">
                <input type="checkbox" id="invert-scroll-toggle">
                <span class="label-text">Invert Scroll</span>
            </label>
            <div class="dropdown-container">
                <button id="spread-mode-btn" class="toolbar-btn" title="Spread Mode">
                    <i class="fas fa-book-open"></i>
                </button>
                <div id="spread-mode-dropdown" class="dropdown-content">
                    <button id="spread-none-btn">Single Page</button>
                    <button id="spread-odd-btn">Odd Spread</button>
                    <button id="spread-even-btn">Even Spread</button>
                </div>
            </div>
        </div>
        <div class="control-group action-controls">
            <div class="dropdown-container">
                <button id="customize-btn" class="toolbar-btn" title="Customize">
                    <i class="fas fa-paint-brush"></i>
                </button>
                <div id="customize-dropdown" class="dropdown-content">
                    <button id="hand-tool-toggle" class="toolbar-btn-dropdown" title="Toggle Hand Tool">
                        <i class="fas fa-hand-paper"></i> Hand
                    </button>
                    <button id="highlighter-tool-btn" class="toolbar-btn-dropdown" title="Highlighter">
                        <i class="fas fa-highlighter"></i> Highlight
                    </button>
                    <div id="highlighter-settings" class="dropdown-submenu">
                        <label for="highlighter-color">Color:</label>
                        <input type="color" id="highlighter-color" value="#FFFF00">
                        <label for="highlighter-size">Size:</label>
                        <input type="range" id="highlighter-size" min="1" max="50" value="20">
                    </div>
                    <button id="pencil-tool-btn" class="toolbar-btn-dropdown" title="Pencil">
                        <i class="fas fa-pencil-alt"></i> Pencil
                    </button>
                    <div id="pencil-settings" class="dropdown-submenu">
                        <label for="pencil-color">Color:</label>
                        <input type="color" id="pencil-color" value="#000000">
                        <label for="pencil-size">Size:</label>
                        <input type="range" id="pencil-size" min="1" max="20" value="3">
                    </div>
                    <button id="eraser-tool-btn" class="toolbar-btn-dropdown" title="Eraser">
                        <i class="fas fa-eraser"></i> Eraser
                    </button>
                    <div id="eraser-settings" class="dropdown-submenu">
                        <label for="eraser-size">Size:</label>
                        <input type="range" id="eraser-size" min="5" max="100" value="20">
                    </div>
                    <button id="text-tool-btn" class="toolbar-btn-dropdown" title="Add Text">
                        <i class="fas fa-font"></i> Text
                    </button>
                    <div id="text-settings" class="dropdown-submenu">
                        <label for="text-font">Font:</label>
                        <select id="text-font">
                            <option>Arial</option>
                            <option>Verdana</option>
                            <option>Times New Roman</option>
                            <option>Courier New</option>
                        </select>
                        <label for="text-size">Size:</label>
                        <input type="number" id="text-size" value="16" min="8" max="72">
                        <label for="text-color">Color:</label>
                        <input type="color" id="text-color" value="#000000">
                    </div>
                    <button id="image-tool-btn" class="toolbar-btn-dropdown" title="Add Image">
                        <i class="fas fa-image"></i> Image
                    </button>
                    <button id="signature-tool-btn" class="toolbar-btn-dropdown" title="Add Signature">
                        <i class="fas fa-file-signature"></i> Signature
                    </button>
                </div>
            </div>
            <button id="presentation-mode-btn" class="toolbar-btn" title="Presentation Mode">
                <i class="fas fa-expand"></i>
            </button>
            <div class="dropdown-container">
                <button id="rotate-btn" class="toolbar-btn" title="Rotate">
                    <i class="fas fa-sync-alt"></i>
                </button>
                <div id="rotate-dropdown" class="dropdown-content">
                    <button id="rotate-right-btn" class="toolbar-btn-dropdown">Rotate Right (+90°)</button>
                    <button id="rotate-left-btn" class="toolbar-btn-dropdown">Rotate Left (-90°)</button>
                </div>
            </div>
            
            <div class="dropdown-container">
                <button id="download-btn" class="toolbar-btn" title="Download">
                    <i class="fas fa-download"></i>
                </button>
                <div id="download-dropdown" class="dropdown-content">
                    <button id="download-standard-btn">Standard PDF</button>
                    <button id="download-modified-btn">Modified PDF</button>
                </div>
            </div>

            <div class="dropdown-container">
                <button id="print-btn" class="toolbar-btn" title="Print">
                    <i class="fas fa-print"></i>
                </button>
                <div id="print-dropdown" class="dropdown-content">
                    <button id="print-standard-btn">Standard Print</button>
                    <button id="print-modified-btn">Modified Print</button>
                </div>
            </div>
        </div>
    </div>
  </div>

<div id="viewer-container">
  <div id="sidebar-preview">
    <div id="sidebar-content"></div>
  </div>
  <div id="pdf-container">
    <div id="pdf-viewer"></div>
  </div>
</div>

<div id="doc-properties-modal" class="modal-overlay" style="display: none;">
    <div class="modal-content">
        <h4>Document Properties</h4>
        <div id="doc-properties-content" class="properties-grid"></div>
        <div class="modal-actions">
            <button id="doc-properties-close-btn">Close</button>
        </div>
    </div>
</div>

<div id="signature-modal" class="modal-overlay" style="display: none;">
    <div class="modal-content">
        <h4>Draw your signature</h4>
        <canvas id="signature-canvas" width="400" height="200"></canvas>
        <div class="modal-actions">
            <button id="signature-clear-btn">Clear</button>
            <button id="signature-save-btn">Save</button>
            <button id="signature-cancel-btn">Cancel</button>
        </div>
    </div>
</div>

  <div id="loading-message"></div>
<script src="https://unpkg.com/pdf-lib/dist/pdf-lib.min.js"></script>
<script src="./lib/jspdf.umd.min.js"></script>
  <script type="module" src="viewer.js"></script>
</body>
<div id="loading-overlay" class="loading-overlay" style="display: none;">
    <div class="loading-spinner"></div>
    <div id="loading-text" class="loading-text">Generating PDF...</div>
</div>
</html>