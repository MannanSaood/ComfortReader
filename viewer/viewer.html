<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>ComfortRead</title>
    <link rel="stylesheet" href="viewer.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    </head>
<body>

  <div id="top-bar">
    <button id="sidebar-toggle" class="toolbar-btn" title="Toggle Thumbnails">
            <i class="fas fa-bars"></i>
        </button>
    <div id="top-bar-center">
        <div class="dropdown-container">
            <button id="file-menu-btn" class="toolbar-btn">
                <i class="fas fa-file-alt"></i>
                <input type="text" id="file-name-display" class="filename-input" value="Starter.pdf">
                <i class="fas fa-caret-down"></i>
            </button>
            <div id="file-menu-dropdown" class="dropdown-content">
                <button id="open-file-btn" class="toolbar-btn-dropdown">Open File...</button>
            </div>
        </div>
    </div>
</div>

<div id="right-sidebar">
    <div class="sidebar-group">
        <button id="doc-properties-btn" class="toolbar-btn sidebar-icon-btn active" title="Document Properties">
            <i class="fas fa-home"></i>
                </button>
        <div class="sidebar-dropdown-container">
            <button class="toolbar-btn sidebar-icon-btn" title="Settings">
                <i class="fas fa-cog"></i>
                </button>
            <div class="sidebar-dropdown-content">
                <button id="rotate-right-btn" class="toolbar-btn-dropdown">Rotate Right</button>
                <button id="rotate-left-btn" class="toolbar-btn-dropdown">Rotate Left</button>
                <div class="dropdown-separator"></div>
                <button id="comic-mode-btn" class="toolbar-btn-dropdown">Comic Mode</button>
                <button id="manga-mode-btn" class="toolbar-btn-dropdown">Manga Mode</button>
            </div>
        </div>
        <div class="sidebar-dropdown-container">
            <button id="spread-mode-btn" class="toolbar-btn sidebar-icon-btn" title="Spread Mode">
                    <i class="fas fa-book-open"></i>
                </button>
            <div id="spread-mode-dropdown" class="sidebar-dropdown-content">
                    <button id="spread-none-btn">Single Page</button>
                    <button id="spread-odd-btn">Odd Spread</button>
                    <button id="spread-even-btn">Even Spread</button>
                </div>
            </div>
        <div class="sidebar-dropdown-container">
            <button id="customize-btn" class="toolbar-btn sidebar-icon-btn" title="Annotate">
                <i class="fas fa-pencil-alt"></i>
            </button>
            <div id="annotation-dropdown" class="sidebar-dropdown-content">
                <button id="hand-tool-toggle" class="toolbar-btn-dropdown"><i class="fas fa-hand-paper"></i> Hand Tool</button>
                <div class="dropdown-separator"></div>
                <button id="highlighter-tool-btn" class="toolbar-btn-dropdown"><i class="fas fa-highlighter"></i> Highlight</button>
                <div id="highlighter-settings" class="dropdown-submenu">
                    <label for="highlighter-color">Color:</label>
                    <input type="color" id="highlighter-color" value="#FFFF00">
                    <label for="highlighter-size">Size:</label>
                    <input type="range" id="highlighter-size" min="1" max="50" value="20">
                </div>
                <button id="pencil-tool-btn" class="toolbar-btn-dropdown"><i class="fas fa-pencil-alt"></i> Pencil</button>
                <div id="pencil-settings" class="dropdown-submenu">
                    <label for="pencil-color">Color:</label>
                    <input type="color" id="pencil-color" value="#000000">
                    <label for="pencil-size">Size:</label>
                    <input type="range" id="pencil-size" min="1" max="20" value="3">
                </div>
                <button id="eraser-tool-btn" class="toolbar-btn-dropdown"><i class="fas fa-eraser"></i> Eraser</button>
                 <div id="eraser-settings" class="dropdown-submenu">
                    <label for="eraser-size">Size:</label>
                    <input type="range" id="eraser-size" min="5" max="100" value="20">
                </div>
                <div class="dropdown-separator"></div>
                <button id="text-tool-btn" class="toolbar-btn-dropdown" title="Add Text"><i class="fas fa-font"></i> Text</button>
                <div id="text-settings" class="dropdown-submenu">
                    <label for="text-font">Font:</label>
                    <select id="text-font">
                        <option>Arial</option> <option>Verdana</option> <option>Times New Roman</option> <option>Courier New</option>
                    </select>
                    <label for="text-size">Size:</label>
                    <input type="number" id="text-size" value="16" min="8" max="72">
                    <label for="text-color">Color:</label>
                    <input type="color" id="text-color" value="#000000">
                </div>
                <button id="image-tool-btn" class="toolbar-btn-dropdown" title="Add Image"><i class="fas fa-image"></i> Image</button>
                <button id="signature-tool-btn" class="toolbar-btn-dropdown" title="Add Signature"><i class="fas fa-file-signature"></i> Signature</button>
            </div>
        </div>
        <div class="sidebar-dropdown-container">
            <button id="viewmode-category-btn" class="toolbar-btn sidebar-icon-btn" title="View Options">
              <i class="fas fa-eye"></i>
            </button>
            <div class="sidebar-dropdown-content" id="viewmode-sidebar-dropdown">
              <label class="toggle-control"><span>Invert Colors</span><input type="checkbox" id="invert-toggle"></label>
              <label class="toggle-control"><span>Grayscale</span><input type="checkbox" id="grayscale-toggle"></label>
              <label class="toggle-control"><span>Continuous</span><input type="checkbox" id="view-mode-toggle"></label>
              <label class="toggle-control"><span>Horizontal</span><input type="checkbox" id="horizontal-view-toggle"></label>
              <label class="toggle-control"><span>Invert Scroll</span><input type="checkbox" id="invert-scroll-toggle"></label>
            </div>
        </div>
    </div>
    <hr class="group-separator">
    <div class="sidebar-group zoom-controls">
        <button id="zoom-in-btn" class="toolbar-btn sidebar-icon-btn" title="Zoom In"><i class="fas fa-search-plus"></i></button>
        <div class="sidebar-dropdown-container">
             <div id="zoom-level-display-btn" class="zoom-level-display" title="Click for zoom options">100%</div>
             <div id="zoom-dropdown" class="sidebar-dropdown-content">
                <button id="zoom-auto-btn" class="toolbar-btn-dropdown">Auto</button>
                <button id="zoom-actual-btn" class="toolbar-btn-dropdown">Actual Size</button>
                <button id="zoom-fit-btn" class="toolbar-btn-dropdown">Page Fit</button>
                <button id="zoom-width-btn" class="toolbar-btn-dropdown">Page Width</button>
                <div class="dropdown-separator"></div>
                <button class="zoom-preset-btn toolbar-btn-dropdown" data-zoom="0.5">50%</button>
                <button class="zoom-preset-btn toolbar-btn-dropdown" data-zoom="0.75">75%</button>
                <button class="zoom-preset-btn toolbar-btn-dropdown" data-zoom="1">100%</button>
                <button class="zoom-preset-btn toolbar-btn-dropdown" data-zoom="1.25">125%</button>
                <button class="zoom-preset-btn toolbar-btn-dropdown" data-zoom="1.5">150%</button>
                <button class="zoom-preset-btn toolbar-btn-dropdown" data-zoom="2">200%</button>
                <button class="zoom-preset-btn toolbar-btn-dropdown" data-zoom="3">300%</button>
            </div>
        </div>
        <button id="zoom-out-btn" class="toolbar-btn sidebar-icon-btn" title="Zoom Out"><i class="fas fa-search-minus"></i></button>
    </div>
    <hr class="group-separator">
    <div class="sidebar-group action-controls">
        <div class="sidebar-dropdown-container">
            <button id="download-btn" class="toolbar-btn sidebar-icon-btn" title="Download"><i class="fas fa-download"></i></button>
            <div id="download-dropdown" class="sidebar-dropdown-content">
                <button id="download-standard-btn">Standard PDF</button>
                <button id="download-modified-btn">Modified PDF</button>
            </div>
        </div>
        <div class="sidebar-dropdown-container">
            <button id="print-btn" class="toolbar-btn sidebar-icon-btn" title="Print"><i class="fas fa-print"></i></button>
            <div id="print-dropdown" class="sidebar-dropdown-content">
                <button id="print-standard-btn">Standard Print</button>
                <button id="print-modified-btn">Modified Print</button>
            </div>
        </div>
        <button id="presentation-mode-btn" class="toolbar-btn sidebar-icon-btn" title="Presentation Mode"><i class="fas fa-expand"></i></button>
    </div>
  </div>

<div id="viewer-container">
  <div id="sidebar-preview">
    <div id="sidebar-content"></div>
  </div>
  <div id="pdf-container">
    <div id="pdf-viewer"></div>
  </div>
</div>

<div id="bottom-page-controls">
  <button id="first-page-btn" class="toolbar-btn" title="First Page">
    <i class="fas fa-step-backward"></i>
  </button>
  <button id="prev-page" class="toolbar-btn" title="Previous Page">
    <i class="fas fa-chevron-left"></i>
  </button>
  <input type="number" id="page-number" value="1" min="1">
  <span id="page-count">/ 1</span>
  <button id="next-page" class="toolbar-btn" title="Next Page">
    <i class="fas fa-chevron-right"></i>
  </button>
  <button id="last-page-btn" class="toolbar-btn" title="Last Page">
    <i class="fas fa-step-forward"></i>
  </button>
</div>

<div id="loading-message"></div>

<div id="doc-properties-modal" class="modal-overlay" style="display: none;">
    <div class="modal-content">
        <h4>Document Properties</h4>
        <div id="doc-properties-content" class="properties-grid"></div>
        <div class="modal-actions">
            <button id="doc-properties-close-btn">Close</button>
        </div>
    </div>
</div>

<div id="signature-modal" class="modal-overlay" style="display: none;">
    <div class="modal-content">
        <h4>Draw your signature</h4>
        <canvas id="signature-canvas" width="400" height="200"></canvas>
        <div class="modal-actions">
            <button id="signature-clear-btn">Clear</button>
            <button id="signature-save-btn">Save</button>
            <button id="signature-cancel-btn">Cancel</button>
        </div>
    </div>
</div>

<div id="loading-overlay" class="loading-overlay" style="display: none;">
    <div class="loading-spinner"></div>
    <div class="loading-text">Loading...</div>
</div>

<script src="./lib/pdf-lib.min.js"></script>
<script src="./lib/jspdf.umd.min.js"></script>
  <script type="module" src="viewer.js"></script>
</body>
</html>